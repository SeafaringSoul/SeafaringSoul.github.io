<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Rust 错误处理总结 | Seafarer</title><meta name="keywords" content="后端开发"><meta name="author" content="Seafarer"><meta name="copyright" content="Seafarer"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Rust 错误处理总结"><meta name="application-name" content="Rust 错误处理总结"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Rust 错误处理总结"><meta property="og:url" content="http://example.com/2025/01/08/rust_error/index.html"><meta property="og:site_name" content="Seafarer"><meta property="og:description" content="Rust 错误处理总结：从 panic! 到 Result 的管理1. 处理不可恢复的错误（Chapter 9.1）关键概念:不可恢复的错误通常指的是那些错误发生后，程序无法继续执行的情况。在 Rust 中，使用 panic! 宏来处理这些错误。  panic! 宏:panic! 用于当程序遇到无法"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=99f8cb3a-48e0-3183-85a9-dcf5a18772f9"><meta property="article:author" content="Seafarer"><meta property="article:tag" content="Web3, Rust, Solidity, blockchain, smart contracts, decentralized, coding, web development"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=99f8cb3a-48e0-3183-85a9-dcf5a18772f9"><meta name="description" content="Rust 错误处理总结：从 panic! 到 Result 的管理1. 处理不可恢复的错误（Chapter 9.1）关键概念:不可恢复的错误通常指的是那些错误发生后，程序无法继续执行的情况。在 Rust 中，使用 panic! 宏来处理这些错误。  panic! 宏:panic! 用于当程序遇到无法"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2025/01/08/rust_error/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Seafarer","link":"链接: ","source":"来源: Seafarer","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Seafarer',
  title: 'Rust 错误处理总结',
  postAI: '',
  pageFillDescription: 'Rust 错误处理总结：从 panic! 到 Result 的管理, 1. 处理不可恢复的错误（Chapter 9.1）, 关键概念, 示例, 不可恢复错误的使用场景, 注意事项, 2. 处理可恢复的错误（Chapter 9.2）, 关键概念, 使用 Result 处理错误, 示例, Result 的链式操作, 注意事项, 3. panic! 还是 Result？（Chapter 9.3）, 何时使用 panic!何时使用 Result, panic! 的好处与坏处, Result 的好处与坏处, 总结, 结语：Rust 错误处理的哲学错误处理总结从到的管理处理不可恢复的错误关键概念不可恢复的错误通常指的是那些错误发生后程序无法继续执行的情况在中使用宏来处理这些错误宏用于当程序遇到无法处理的错误时立即终止程序并输出错误信息通常用于开发过程中或者对错误无力回天的情况下错误的触发调用触发时程序会打印出错误信息并退出程序堆栈会被回溯回溯信息帮助我们诊断问题不需要返回值并且会引发程序的中止示例不可恢复错误的使用场景程序遇到不可修复的错误时比如非法操作致命异常等如果某个函数无法继续处理它就应该直接让程序停止执行注意事项的性能开销一旦发生会开始进行堆栈的回溯所有的栈帧都会被清理这是一个昂贵的操作程序会变得较慢在某些系统编程或嵌入式开发中我们可能需要完全避免使用更灵活的错误处理方式处理可恢复的错误关键概念与不可恢复的错误不同可恢复的错误指的是程序可以继续执行但需要某种形式的错误处理中使用类型来处理这些错误枚举是一个泛型枚举定义如下成功时的结果错误时的结果类型的使用表示操作成功并返回一个类型为的值表示操作失败并返回一个类型为的错误使用处理错误通过语句处理可以显式地指定在和的情况下采取的操作提供了多种处理的简便方法比如等示例的链式操作提供了许多方法来帮助操作类型直接解包如果是返回值如果是则类似于但是可以自定义错误消息对中的值应用一个闭包返回一个新的用于链接多个可能会返回的操作链式执行注意事项错误传播可以通过运算符将错误从一个函数传播到调用者简化错误处理和的区别表示可能没有值的情况或通常用于处理缺失的数据表示操作可能失败的情况或通常用于处理错误还是何时使用何时使用在中和都是处理错误的机制但它们的使用场景不同使用适用于程序不可恢复的错误通常用在那些无法预见的且错误无可恢复的场景中例如某些初始化操作失败时无法继续执行时使用示例在编写库时遇到空指针越界访问等致命错误时可以使用让程序终止使用适用于可以恢复的错误或者程序仍然能够继续执行的错误情况例如文件读取失败网络请求失败等此时可以返回一个类型调用者决定如何处理错误例如重试默认值等的好处与坏处优点处理代码简单不需要显式处理错误可以确保程序在遇到致命错误时停止避免错误扩散缺点可能导致性能损失特别是在堆栈回溯时适用于程序无法继续执行的错误但不适用于可以恢复的错误的好处与坏处优点可以优雅地处理可恢复错误避免程序中断错误处理逻辑灵活可以在情况下进行补救缺点错误处理较为冗长必须显式地处理每个错误有时需要写大量的错误处理代码特别是当错误传播很深时总结优雅地处理错误使用类型来进行错误的传播和处理特别是在或库开发中非常常见不可恢复的错误使用来处理那些程序无法继续执行的错误例如失败的情况结语错误处理的哲学的错误处理哲学是基于安全性和可预测性通过和机制强制程序员显式地处理错误避免潜在的未处理错误流入代码中通过这些机制实现了更加严格的内存和类型安全而对错误的处理能力也增强了代码的健壮性关键点用于无法恢复的错误用于可恢复的错误最佳实践尽量避免使用类型优雅地处理可恢复错误利用和链式方法使错误处理更加简洁通过这些错误处理模式提供了强大的控制流使开发者能够高效且安全地编写复杂的应用程序',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-01-08 20:58:46',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://ooo.0x0.ooo/2024/12/23/OEUz8I.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Seafarer</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" style="font-size: 1.05rem;">后端开发<sup>11</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Rust/" itemprop="url">Rust</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>后端开发</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Rust 错误处理总结</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-01-08T04:26:00.000Z" title="发表于 2025-01-08 12:26:00">2025-01-08</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-01-08T12:58:46.317Z" title="更新于 2025-01-08 20:58:46">2025-01-08</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="Rust 错误处理总结"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=99f8cb3a-48e0-3183-85a9-dcf5a18772f9"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2025/01/08/rust_error/"><header><a class="post-meta-categories" href="/categories/Rust/" itemprop="url">Rust</a><a href="/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" tabindex="-1" itemprop="url">后端开发</a><h1 id="CrawlerTitle" itemprop="name headline">Rust 错误处理总结</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Seafarer</span><time itemprop="dateCreated datePublished" datetime="2025-01-08T04:26:00.000Z" title="发表于 2025-01-08 12:26:00">2025-01-08</time><time itemprop="dateCreated datePublished" datetime="2025-01-08T12:58:46.317Z" title="更新于 2025-01-08 20:58:46">2025-01-08</time></header><h3 id="Rust-错误处理总结：从-panic-到-Result-的管理"><a href="#Rust-错误处理总结：从-panic-到-Result-的管理" class="headerlink" title="Rust 错误处理总结：从 panic! 到 Result 的管理"></a>Rust 错误处理总结：从 <code>panic!</code> 到 <code>Result</code> 的管理</h3><h4 id="1-处理不可恢复的错误（Chapter-9-1）"><a href="#1-处理不可恢复的错误（Chapter-9-1）" class="headerlink" title="1. 处理不可恢复的错误（Chapter 9.1）"></a><strong>1. 处理不可恢复的错误（Chapter 9.1）</strong></h4><h5 id="关键概念"><a href="#关键概念" class="headerlink" title="关键概念:"></a><strong>关键概念</strong>:</h5><p>不可恢复的错误通常指的是那些错误发生后，程序无法继续执行的情况。在 Rust 中，使用 <code>panic!</code> 宏来处理这些错误。</p>
<ul>
<li><p><strong><code>panic!</code> 宏</strong>:<br><code>panic!</code> 用于当程序遇到无法处理的错误时立即终止程序，并输出错误信息。通常用于开发过程中或者对错误无力回天的情况下。</p>
</li>
<li><p><strong>错误的触发</strong>:</p>
<ul>
<li>调用 <code>panic!</code> 触发时，程序会打印出错误信息并退出，程序堆栈会被回溯。回溯信息帮助我们诊断问题。</li>
<li><code>panic!</code> 不需要返回值，并且会引发程序的中止。</li>
</ul>
</li>
</ul>
<h5 id="示例"><a href="#示例" class="headerlink" title="示例:"></a><strong>示例</strong>:</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="built_in">panic!</span>(<span class="string">&quot;This is a panic message!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="不可恢复错误的使用场景"><a href="#不可恢复错误的使用场景" class="headerlink" title="不可恢复错误的使用场景:"></a><strong>不可恢复错误的使用场景</strong>:</h5><ul>
<li>程序遇到不可修复的错误时，比如非法操作、致命异常等。</li>
<li>如果某个函数无法继续处理，它就应该直接 <code>panic!</code>，让程序停止执行。</li>
</ul>
<h5 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项:"></a><strong>注意事项</strong>:</h5><ul>
<li><strong><code>panic!</code> 的性能开销</strong>：一旦发生 <code>panic!</code>，Rust 会开始进行堆栈的回溯，所有的栈帧都会被清理。这是一个昂贵的操作，程序会变得较慢。</li>
<li>在某些系统编程或嵌入式开发中，我们可能需要完全避免 <code>panic!</code>，使用更灵活的错误处理方式。</li>
</ul>
<hr>
<h4 id="2-处理可恢复的错误（Chapter-9-2）"><a href="#2-处理可恢复的错误（Chapter-9-2）" class="headerlink" title="2. 处理可恢复的错误（Chapter 9.2）"></a><strong>2. 处理可恢复的错误（Chapter 9.2）</strong></h4><h5 id="关键概念-1"><a href="#关键概念-1" class="headerlink" title="关键概念:"></a><strong>关键概念</strong>:</h5><p>与不可恢复的错误不同，可恢复的错误指的是程序可以继续执行，但需要某种形式的错误处理。Rust 中使用 <code>Result</code> 类型来处理这些错误。</p>
<ul>
<li><p><strong><code>Result</code> 枚举</strong>:<br><code>Result</code> 是一个泛型枚举，定义如下：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Result</span>&lt;T, E&gt; &#123;</span><br><span class="line">    <span class="title function_ invoke__">Ok</span>(T),    <span class="comment">// 成功时的结果</span></span><br><span class="line">    <span class="title function_ invoke__">Err</span>(E),   <span class="comment">// 错误时的结果</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>Result</code> 类型的使用</strong>:</p>
<ul>
<li><code>Ok(T)</code>：表示操作成功，并返回一个类型为 <code>T</code> 的值。</li>
<li><code>Err(E)</code>：表示操作失败，并返回一个类型为 <code>E</code> 的错误。</li>
</ul>
</li>
</ul>
<h5 id="使用-Result-处理错误"><a href="#使用-Result-处理错误" class="headerlink" title="使用 Result 处理错误:"></a><strong>使用 <code>Result</code> 处理错误</strong>:</h5><ul>
<li>通过 <code>match</code> 语句处理 <code>Result</code>，可以显式地指定在 <code>Ok</code> 和 <code>Err</code> 的情况下采取的操作。</li>
<li>Rust 提供了多种处理 <code>Result</code> 的简便方法，比如 <code>unwrap()</code>、<code>expect()</code>、<code>map()</code>、<code>and_then()</code> 等。</li>
</ul>
<h5 id="示例-1"><a href="#示例-1" class="headerlink" title="示例:"></a><strong>示例</strong>:</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">divide</span>(a: <span class="type">i32</span>, b: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="type">i32</span>, <span class="type">String</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> b == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="title function_ invoke__">Err</span>(<span class="string">&quot;Cannot divide by zero&quot;</span>.<span class="title function_ invoke__">to_string</span>())</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_ invoke__">Ok</span>(a / b)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">result</span> = <span class="title function_ invoke__">divide</span>(<span class="number">10</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">match</span> result &#123;</span><br><span class="line">        <span class="title function_ invoke__">Ok</span>(v) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Success: &#123;&#125;&quot;</span>, v),</span><br><span class="line">        <span class="title function_ invoke__">Err</span>(e) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Error: &#123;&#125;&quot;</span>, e),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Result-的链式操作"><a href="#Result-的链式操作" class="headerlink" title="Result 的链式操作:"></a><strong><code>Result</code> 的链式操作</strong>:</h5><p>Rust 提供了许多方法来帮助操作 <code>Result</code> 类型：</p>
<ul>
<li><code>unwrap()</code>：直接解包 <code>Result</code>，如果是 <code>Ok</code>，返回值；如果是 <code>Err</code>，则 <code>panic!</code>。</li>
<li><code>expect()</code>：类似于 <code>unwrap()</code>，但是可以自定义错误消息。</li>
<li><code>map()</code>：对 <code>Result</code> 中的 <code>Ok</code> 值应用一个闭包，返回一个新的 <code>Result</code>。</li>
<li><code>and_then()</code>：用于链接多个可能会返回 <code>Result</code> 的操作，链式执行。</li>
</ul>
<h5 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项:"></a><strong>注意事项</strong>:</h5><ul>
<li><p><strong>错误传播</strong>：可以通过 <code>?</code> 运算符将错误从一个函数传播到调用者，简化错误处理。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">read_file</span>(path: &amp;<span class="type">str</span>) <span class="punctuation">-&gt;</span> <span class="type">Result</span>&lt;<span class="type">String</span>, std::io::Error&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">contents</span> = std::fs::<span class="title function_ invoke__">read_to_string</span>(path)?;</span><br><span class="line">    <span class="title function_ invoke__">Ok</span>(contents)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>Option</code> 和 <code>Result</code> 的区别</strong>：</p>
<ul>
<li><code>Option</code> 表示可能没有值的情况（<code>Some</code> 或 <code>None</code>），通常用于处理缺失的数据。</li>
<li><code>Result</code> 表示操作可能失败的情况（<code>Ok</code> 或 <code>Err</code>），通常用于处理错误。</li>
</ul>
</li>
</ul>
<hr>
<h4 id="3-panic-还是-Result？（Chapter-9-3）"><a href="#3-panic-还是-Result？（Chapter-9-3）" class="headerlink" title="3. panic! 还是 Result？（Chapter 9.3）"></a><strong>3. <code>panic!</code> 还是 <code>Result</code>？（Chapter 9.3）</strong></h4><h5 id="何时使用-panic-，何时使用-Result"><a href="#何时使用-panic-，何时使用-Result" class="headerlink" title="何时使用 panic!，何时使用 Result:"></a><strong>何时使用 <code>panic!</code>，何时使用 <code>Result</code></strong>:</h5><p>在 Rust 中，<code>panic!</code> 和 <code>Result</code> 都是处理错误的机制，但它们的使用场景不同。</p>
<ul>
<li><p>**使用 <code>panic!</code>**：</p>
<ul>
<li>适用于程序不可恢复的错误。通常用在那些无法预见的且错误无可恢复的场景中。例如，某些初始化操作失败时，无法继续执行时使用 <code>panic!</code>。</li>
<li><strong>示例</strong>：在编写库时，遇到空指针、越界访问等致命错误时，可以使用 <code>panic!</code> 让程序终止。</li>
</ul>
</li>
<li><p>**使用 <code>Result</code>**：</p>
<ul>
<li>适用于可以恢复的错误，或者程序仍然能够继续执行的错误情况。例如，文件读取失败、网络请求失败等。此时，可以返回一个 <code>Result</code> 类型，调用者决定如何处理错误（例如重试、默认值等）。</li>
</ul>
</li>
</ul>
<h5 id="panic-的好处与坏处"><a href="#panic-的好处与坏处" class="headerlink" title="panic! 的好处与坏处:"></a><strong><code>panic!</code> 的好处与坏处</strong>:</h5><ul>
<li><strong>优点</strong>：<ul>
<li>处理代码简单，不需要显式处理错误。</li>
<li>可以确保程序在遇到致命错误时停止，避免错误扩散。</li>
</ul>
</li>
<li><strong>缺点</strong>：<ul>
<li>可能导致性能损失，特别是在堆栈回溯时。</li>
<li>适用于程序无法继续执行的错误，但不适用于可以恢复的错误。</li>
</ul>
</li>
</ul>
<h5 id="Result-的好处与坏处"><a href="#Result-的好处与坏处" class="headerlink" title="Result 的好处与坏处:"></a><strong><code>Result</code> 的好处与坏处</strong>:</h5><ul>
<li><strong>优点</strong>：<ul>
<li>可以优雅地处理可恢复错误，避免程序中断。</li>
<li>错误处理逻辑灵活，可以在 <code>Err</code> 情况下进行补救。</li>
</ul>
</li>
<li><strong>缺点</strong>：<ul>
<li>错误处理较为冗长，必须显式地处理每个错误。</li>
<li>有时需要写大量的错误处理代码，特别是当错误传播很深时。</li>
</ul>
</li>
</ul>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结:"></a><strong>总结</strong>:</h5><ul>
<li><strong>优雅地处理错误</strong>：使用 <code>Result</code> 类型来进行错误的传播和处理，特别是在 API 或库开发中非常常见。</li>
<li><strong>不可恢复的错误</strong>：使用 <code>panic!</code> 来处理那些程序无法继续执行的错误，例如 <code>unwrap()</code> 失败的情况。</li>
</ul>
<hr>
<h3 id="结语：Rust-错误处理的哲学"><a href="#结语：Rust-错误处理的哲学" class="headerlink" title="结语：Rust 错误处理的哲学"></a><strong>结语：Rust 错误处理的哲学</strong></h3><p>Rust 的错误处理哲学是基于 <strong>安全性</strong> 和 <strong>可预测性</strong>。通过 <code>Result</code> 和 <code>panic!</code> 机制，Rust 强制程序员显式地处理错误，避免潜在的未处理错误流入代码中。Rust 通过这些机制实现了更加严格的内存和类型安全，而对错误的处理能力也增强了代码的健壮性。</p>
<ul>
<li><strong>关键点</strong>：<code>panic!</code> 用于无法恢复的错误，<code>Result</code> 用于可恢复的错误。</li>
<li><strong>最佳实践</strong>：尽量避免 <code>panic!</code>，使用 <code>Result</code> 类型优雅地处理可恢复错误，利用 <code>?</code> 和链式方法使错误处理更加简洁。</li>
</ul>
<p>通过这些错误处理模式，Rust 提供了强大的控制流，使开发者能够高效且安全地编写复杂的应用程序。</p>
</article><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/01/04/rust_generic/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=490cb911-aaa0-efd6-e862-63c6328fdbfb" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Rust 泛型</div></div></a></div><div class="next-post pull-right"><a href="/2025/01/08/rust_lifetime/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=664f4c35-fcf0-fa2d-24da-60aed5a625b3" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Rust 泛型、Trait 和生命周期语法总结（重点）</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2024/12/24/rust_class/" title="Rust 类型总结"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=00a7f224-7095-2572-ed3d-70e2a2c45882" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-12-24</div><div class="title">Rust 类型总结</div></div></a></div><div><a href="/2024/12/27/rust_enum/" title="Rust 枚举和模式匹配"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=bc117412-ceb4-add6-3e82-7dd8f88710fc" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-12-27</div><div class="title">Rust 枚举和模式匹配</div></div></a></div><div><a href="/2024/12/28/rust_err_return/" title="Rust 返回值和错误处理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=3b697886-9559-f7a8-86bb-2a549fe5dbba" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-12-28</div><div class="title">Rust 返回值和错误处理</div></div></a></div><div><a href="/2025/01/04/rust_generic/" title="Rust 泛型"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=490cb911-aaa0-efd6-e862-63c6328fdbfb" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-01-04</div><div class="title">Rust 泛型</div></div></a></div><div><a href="/2025/01/08/rust_lifetime/" title="Rust 泛型、Trait 和生命周期语法总结（重点）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=664f4c35-fcf0-fa2d-24da-60aed5a625b3" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-01-08</div><div class="title">Rust 泛型、Trait 和生命周期语法总结（重点）</div></div></a></div><div><a href="/2024/12/28/rust_mokuai/" title="Rust 模块化"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=30799a7e-d1cf-918c-cbe4-f4a50a216306" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-12-28</div><div class="title">Rust 模块化</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUz8I.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description">Documenting my transition into Web3 technologies, focusing on Rust, Solidity, and blockchain development.</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Seafarer</h1><div class="author-info__desc">Exploring the Future of Web3 and Coding</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/seafarer" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Rust-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%80%BB%E7%BB%93%EF%BC%9A%E4%BB%8E-panic-%E5%88%B0-Result-%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">Rust 错误处理总结：从 panic! 到 Result 的管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%A4%84%E7%90%86%E4%B8%8D%E5%8F%AF%E6%81%A2%E5%A4%8D%E7%9A%84%E9%94%99%E8%AF%AF%EF%BC%88Chapter-9-1%EF%BC%89"><span class="toc-number">1.1.</span> <span class="toc-text">1. 处理不可恢复的错误（Chapter 9.1）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.1.</span> <span class="toc-text">关键概念:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">示例:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E5%8F%AF%E6%81%A2%E5%A4%8D%E9%94%99%E8%AF%AF%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.1.3.</span> <span class="toc-text">不可恢复错误的使用场景:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.1.4.</span> <span class="toc-text">注意事项:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%A4%84%E7%90%86%E5%8F%AF%E6%81%A2%E5%A4%8D%E7%9A%84%E9%94%99%E8%AF%AF%EF%BC%88Chapter-9-2%EF%BC%89"><span class="toc-number">1.2.</span> <span class="toc-text">2. 处理可恢复的错误（Chapter 9.2）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E6%A6%82%E5%BF%B5-1"><span class="toc-number">1.2.1.</span> <span class="toc-text">关键概念:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Result-%E5%A4%84%E7%90%86%E9%94%99%E8%AF%AF"><span class="toc-number">1.2.2.</span> <span class="toc-text">使用 Result 处理错误:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-1"><span class="toc-number">1.2.3.</span> <span class="toc-text">示例:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Result-%E7%9A%84%E9%93%BE%E5%BC%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.4.</span> <span class="toc-text">Result 的链式操作:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-1"><span class="toc-number">1.2.5.</span> <span class="toc-text">注意事项:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-panic-%E8%BF%98%E6%98%AF-Result%EF%BC%9F%EF%BC%88Chapter-9-3%EF%BC%89"><span class="toc-number">1.3.</span> <span class="toc-text">3. panic! 还是 Result？（Chapter 9.3）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8-panic-%EF%BC%8C%E4%BD%95%E6%97%B6%E4%BD%BF%E7%94%A8-Result"><span class="toc-number">1.3.1.</span> <span class="toc-text">何时使用 panic!，何时使用 Result:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#panic-%E7%9A%84%E5%A5%BD%E5%A4%84%E4%B8%8E%E5%9D%8F%E5%A4%84"><span class="toc-number">1.3.2.</span> <span class="toc-text">panic! 的好处与坏处:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Result-%E7%9A%84%E5%A5%BD%E5%A4%84%E4%B8%8E%E5%9D%8F%E5%A4%84"><span class="toc-number">1.3.3.</span> <span class="toc-text">Result 的好处与坏处:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.3.4.</span> <span class="toc-text">总结:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E8%AF%AD%EF%BC%9ARust-%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E7%9A%84%E5%93%B2%E5%AD%A6"><span class="toc-number">2.</span> <span class="toc-text">结语：Rust 错误处理的哲学</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/01/08/rust_lifetime/" title="Rust 泛型、Trait 和生命周期语法总结（重点）"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=664f4c35-fcf0-fa2d-24da-60aed5a625b3" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust 泛型、Trait 和生命周期语法总结（重点）"/></a><div class="content"><a class="title" href="/2025/01/08/rust_lifetime/" title="Rust 泛型、Trait 和生命周期语法总结（重点）">Rust 泛型、Trait 和生命周期语法总结（重点）</a><time datetime="2025-01-08T15:07:00.000Z" title="发表于 2025-01-08 23:07:00">2025-01-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/08/rust_error/" title="Rust 错误处理总结"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=99f8cb3a-48e0-3183-85a9-dcf5a18772f9" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust 错误处理总结"/></a><div class="content"><a class="title" href="/2025/01/08/rust_error/" title="Rust 错误处理总结">Rust 错误处理总结</a><time datetime="2025-01-08T04:26:00.000Z" title="发表于 2025-01-08 12:26:00">2025-01-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/04/rust_generic/" title="Rust 泛型"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=490cb911-aaa0-efd6-e862-63c6328fdbfb" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust 泛型"/></a><div class="content"><a class="title" href="/2025/01/04/rust_generic/" title="Rust 泛型">Rust 泛型</a><time datetime="2025-01-04T06:00:00.000Z" title="发表于 2025-01-04 14:00:00">2025-01-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/28/rust_err_return/" title="Rust 返回值和错误处理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=3b697886-9559-f7a8-86bb-2a549fe5dbba" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust 返回值和错误处理"/></a><div class="content"><a class="title" href="/2024/12/28/rust_err_return/" title="Rust 返回值和错误处理">Rust 返回值和错误处理</a><time datetime="2024-12-28T14:19:00.000Z" title="发表于 2024-12-28 22:19:00">2024-12-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/28/rust_mokuai/" title="Rust 模块化"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=30799a7e-d1cf-918c-cbe4-f4a50a216306" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust 模块化"/></a><div class="content"><a class="title" href="/2024/12/28/rust_mokuai/" title="Rust 模块化">Rust 模块化</a><time datetime="2024-12-28T14:19:00.000Z" title="发表于 2024-12-28 22:19:00">2024-12-28</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="Seafarer" target="_blank">Seafarer</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">1</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" style="font-size: 0.88rem;">后端开发<sup>11</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Seafarer 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>