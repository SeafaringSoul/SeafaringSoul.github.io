<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Rust 模块化 | Seafarer</title><meta name="keywords" content="后端开发"><meta name="author" content="Seafarer"><meta name="copyright" content="Seafarer"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Rust 模块化"><meta name="application-name" content="Rust 模块化"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Rust 模块化"><meta property="og:url" content="http://example.com/2024/12/28/rust_mokuai/index.html"><meta property="og:site_name" content="Seafarer"><meta property="og:description" content="工程化模块1. 模块 (Modules)模块是Rust的一个重要特性，它帮助组织和分隔代码，使代码更加清晰和易于维护。模块可以将相关的功能、结构体、函数等封装在一起。 1.1 定义模块模块可以通过mod关键字来定义： 12345mod my_module &amp;#123;    pub fn say_h"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=dd3cdcba-d6ad-fee4-9778-e97902633eb1"><meta property="article:author" content="Seafarer"><meta property="article:tag" content="Web3, Rust, Solidity, blockchain, smart contracts, decentralized, coding, web development"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=dd3cdcba-d6ad-fee4-9778-e97902633eb1"><meta name="description" content="工程化模块1. 模块 (Modules)模块是Rust的一个重要特性，它帮助组织和分隔代码，使代码更加清晰和易于维护。模块可以将相关的功能、结构体、函数等封装在一起。 1.1 定义模块模块可以通过mod关键字来定义： 12345mod my_module &amp;#123;    pub fn say_h"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2024/12/28/rust_mokuai/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Seafarer","link":"链接: ","source":"来源: Seafarer","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Seafarer',
  title: 'Rust 模块化',
  postAI: '',
  pageFillDescription: '工程化模块, 1. 模块 (Modules), 1.1 定义模块, 1.2 访问模块中的内容, 1.3 模块的层级结构, 2. 文件和目录结构, 3. 公共与私有, 4. 使用外部库 (Crates), 4.1 引入外部库, 5. 可见性控制 (Visibility), 6. 模块化的最佳实践, 补充（路径访问）, 1. crate, 用法：, 示例：, 2. super, 用法：, 示例：, 3. self, 用法：, 示例：, 总结：, 补充（路径访问）, 1. 包（Package）, 1.1 包的结构, 1.2 创建包, 1.3 包的Cargo.toml文件, 2. crate, 2.1 库和二进制Crate, 3. 包和crate的关系, 3.1 包与crate的不同, 4. cargo与包的管理, 常用的cargo命令：, 总结：工程化模块模块模块是的一个重要特性它帮助组织和分隔代码使代码更加清晰和易于维护模块可以将相关的功能结构体函数等封装在一起定义模块模块可以通过关键字来定义关键字声明了一个新的模块关键字使函数对外可见如果没有默认情况下它是私有的只能在当前模块内访问访问模块中的内容要访问模块中的内容可以使用的方式调用模块中的函数模块的层级结构支持模块的层级结构可以嵌套模块模块的结构可以与文件系统的目录结构相对应调用内层模块的函数文件和目录结构鼓励将模块映射到文件和目录结构每个声明会对应一个文件或目录单一文件模块模块可以直接在当前文件中定义多文件模块当模块内容比较多时可以使用多个文件来组织模块假设有如下结构在中声明模块引入模块中定义模块的主要内容引入子模块定义子模块公共与私有默认情况下模块中的项是私有的即只能在同一个模块内部访问使用关键字将项公开以便其他模块可以访问可以访问会编译错误不能访问使用外部库的模块化不仅限于项目内的组织还可以通过引入外部库外部库可以通过文件管理和依赖引入外部库在中添加依赖然后在代码中使用引入外部库可见性控制通过关键字控制模块内外的可见性除了还可以使用等来控制更细粒度的访问权限对当前内可见对父模块可见模块化的最佳实践合理划分模块根据功能和结构将代码划分成合理的模块避免单个模块过大模块文件组织对于较大的模块使用子模块和目录结构来进行组织文档和可见性通过合适的可见性控制来决定哪些函数或结构体对外部可见哪些应该保持私有补充路径访问指代当前的包或库它用于在当前包或库中引用其他模块它通常用于从根模块访问模块无论当前模块的位置在哪里用法用于访问当前包的根模块或其它模块它的作用是从整个包的根开始查找模块而不管当前代码所在的位置示例假设你的项目结构如下在中定义了模块在中想要访问它可以使用通过访问根模块中的在这里表示从当前包的根模块开始查找表示父模块它可以用来访问当前模块的父模块中的项使你能够从当前模块访问到上一层父模块的内容用法用于引用当前模块的父模块通常用于多层模块结构中当你需要在子模块中引用父模块的内容时使用示例假设你的项目结构如下访问模块的函数通过访问模块中的函数可以用于访问父模块在这个例子中表示访问模块的内容用于引用当前模块它代表当前模块本身主要用于在模块内部引用当前模块的项用法用于访问当前模块的成员通常用于引用当前模块内定义的函数结构体常量等示例使用来调用当前模块中的函数调用内部的函数在这个例子中表示访问模块中的函数总结表示当前包或库的根常用于从根开始查找模块表示父模块通常用于访问当前模块的上一层父模块中的内容表示当前模块用于引用当前模块中的项补充路径访问在中包是指一个项目的最外层单位它包含了一个或多个库包是一个代码库的集合通常对应一个目录包含了源代码配置文件等中的包有时被称作但包和有一些区别包包是项目的整体包含一个或多个并且是一个发布和分发的基本单元包的结构一个包至少需要包含一个文件用来管理项目的依赖配置等和一个目录其中目录下包含源代码文件包通常有两种类型库包这个包生成一个库可以被其他项目引用二进制包这个包生成一个可执行的二进制文件一个包可以包含多个二进制文件但只允许有一个文件创建包使用命令可以创建一个新的包创建一个二进制包创建一个库包这将自动为你生成包含和或的基本文件结构包的文件包的文件包含了项目的元数据例如依赖版本包名等它是项目的配置文件类似于在中的作用例如文件的内容可能如下在上面的示例中部分定义了包的元数据名称版本等而部分列出了该包的依赖项是中代码的最小单元可以是一个库或一个二进制可执行文件每个包至少有一个并且可以通过关键字将代码划分成多个模块中的是源代码的组织方式可以被其他项目作为依赖引用库和二进制库没有函数提供函数和结构体等功能给其他项目使用二进制具有一个函数构建为可执行文件包和的关系一个包可以包含多个但一个属于一个包每个包至少有一个可以是库或二进制包的目标是提供一个更大的项目结构其中包含多个这些可以通过模块化组织和管理包与的不同包是项目的整体包含一个或多个它是的发布单位是的构建单元可以是一个库或一个二进制文件每个项目中的每个文件夹对应着一个与包的管理使用工具来管理包构建测试等工作会根据文件来理解包的配置和依赖常用的命令创建一个新的项目包构建当前包运行当前包的二进制文件运行当前包中的测试为当前包生成文档将包发布到的公共库注册中心总结包是项目的整体包含一个或多个用于代码组织依赖管理发布和分发中最小的编译单元可以是库或二进制文件每个包至少包含一个是包的配置文件管理项目的依赖版本等信息',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-12-28 23:18:34',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://ooo.0x0.ooo/2024/12/23/OEUz8I.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Seafarer</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" style="font-size: 1.05rem;">后端开发<sup>9</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Rust/" itemprop="url">Rust</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>后端开发</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Rust 模块化</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-12-28T14:19:00.000Z" title="发表于 2024-12-28 22:19:00">2024-12-28</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-12-28T15:18:34.494Z" title="更新于 2024-12-28 23:18:34">2024-12-28</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="Rust 模块化"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=dd3cdcba-d6ad-fee4-9778-e97902633eb1"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2024/12/28/rust_mokuai/"><header><a class="post-meta-categories" href="/categories/Rust/" itemprop="url">Rust</a><a href="/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" tabindex="-1" itemprop="url">后端开发</a><h1 id="CrawlerTitle" itemprop="name headline">Rust 模块化</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Seafarer</span><time itemprop="dateCreated datePublished" datetime="2024-12-28T14:19:00.000Z" title="发表于 2024-12-28 22:19:00">2024-12-28</time><time itemprop="dateCreated datePublished" datetime="2024-12-28T15:18:34.494Z" title="更新于 2024-12-28 23:18:34">2024-12-28</time></header><h1 id="工程化模块"><a href="#工程化模块" class="headerlink" title="工程化模块"></a>工程化模块</h1><h3 id="1-模块-Modules"><a href="#1-模块-Modules" class="headerlink" title="1. 模块 (Modules)"></a>1. <strong>模块 (Modules)</strong></h3><p>模块是Rust的一个重要特性，它帮助组织和分隔代码，使代码更加清晰和易于维护。模块可以将相关的功能、结构体、函数等封装在一起。</p>
<h4 id="1-1-定义模块"><a href="#1-1-定义模块" class="headerlink" title="1.1 定义模块"></a>1.1 <strong>定义模块</strong></h4><p>模块可以通过<code>mod</code>关键字来定义：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mod</span> my_module &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">say_hello</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Hello from the module!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>mod</code> 关键字声明了一个新的模块 <code>my_module</code>。</li>
<li><code>pub</code> 关键字使 <code>say_hello</code> 函数对外可见。如果没有<code>pub</code>，默认情况下它是私有的，只能在当前模块内访问。</li>
</ul>
<h4 id="1-2-访问模块中的内容"><a href="#1-2-访问模块中的内容" class="headerlink" title="1.2 访问模块中的内容"></a>1.2 <strong>访问模块中的内容</strong></h4><p>要访问模块中的内容，可以使用<code>mod_name::function_name</code>的方式：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mod</span> my_module &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">say_hello</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Hello from the module!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    my_module::<span class="title function_ invoke__">say_hello</span>(); <span class="comment">// 调用模块中的函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-模块的层级结构"><a href="#1-3-模块的层级结构" class="headerlink" title="1.3 模块的层级结构"></a>1.3 <strong>模块的层级结构</strong></h4><p>Rust支持模块的层级结构，可以嵌套模块。模块的结构可以与文件系统的目录结构相对应。</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mod</span> outer &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">mod</span> inner &#123;</span><br><span class="line">        <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">greet</span>() &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;Hello from inner module!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    outer::inner::<span class="title function_ invoke__">greet</span>(); <span class="comment">// 调用内层模块的函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-文件和目录结构"><a href="#2-文件和目录结构" class="headerlink" title="2. 文件和目录结构"></a>2. <strong>文件和目录结构</strong></h3><p>Rust鼓励将模块映射到文件和目录结构。每个<code>mod</code>声明会对应一个文件或目录。</p>
<ul>
<li><strong>单一文件模块</strong>：模块可以直接在当前文件中定义。</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mod</span> my_module &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">say_hello</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Hello!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>多文件模块</strong>：当模块内容比较多时，可以使用多个文件来组织模块。</p>
<p>假设有如下结构：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">  main.rs</span><br><span class="line">  my_module/</span><br><span class="line">    mod.rs</span><br><span class="line">    submodule.rs</span><br></pre></td></tr></table></figure>

<ul>
<li>在 <code>main.rs</code> 中声明模块：</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mod</span> my_module; <span class="comment">// 引入 my_module 模块</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>my_module/mod.rs</code> 中定义模块的主要内容：</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">mod</span> submodule; <span class="comment">// 引入子模块</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">say_hello</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Hello from my_module!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>my_module/submodule.rs</code> 定义子模块：</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">greet</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Hello from submodule!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-公共与私有"><a href="#3-公共与私有" class="headerlink" title="3. 公共与私有"></a>3. <strong>公共与私有</strong></h3><ul>
<li>默认情况下，模块中的项是私有的，即只能在同一个模块内部访问。</li>
<li>使用<code>pub</code>关键字将项公开，以便其他模块可以访问。</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mod</span> my_module &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">public_function</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;This is a public function.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">private_function</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;This is a private function.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    my_module::<span class="title function_ invoke__">public_function</span>();  <span class="comment">// 可以访问</span></span><br><span class="line">    <span class="comment">// my_module::private_function();  // 会编译错误，不能访问</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-使用外部库-Crates"><a href="#4-使用外部库-Crates" class="headerlink" title="4. 使用外部库 (Crates)"></a>4. <strong>使用外部库 (Crates)</strong></h3><p>Rust的模块化不仅限于项目内的组织，还可以通过<code>extern crate</code>引入外部库（crate）。外部库可以通过<code>Cargo.toml</code>文件管理和依赖。</p>
<h4 id="4-1-引入外部库"><a href="#4-1-引入外部库" class="headerlink" title="4.1 引入外部库"></a>4.1 <strong>引入外部库</strong></h4><p>在<code>Cargo.toml</code>中添加依赖：</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="attr">regex</span> = <span class="string">&quot;1&quot;</span></span><br></pre></td></tr></table></figure>

<p>然后在代码中使用：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">crate</span> regex;  <span class="comment">// 引入外部库</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> regex::Regex;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">re</span> = Regex::<span class="title function_ invoke__">new</span>(<span class="string">r&quot;^\d+$&quot;</span>).<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, re.<span class="title function_ invoke__">is_match</span>(<span class="string">&quot;123&quot;</span>)); <span class="comment">// true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-可见性控制-Visibility"><a href="#5-可见性控制-Visibility" class="headerlink" title="5. 可见性控制 (Visibility)"></a>5. <strong>可见性控制 (Visibility)</strong></h3><p>Rust通过<code>pub</code>关键字控制模块内外的可见性。除了<code>pub</code>，还可以使用<code>pub(crate)</code>、<code>pub(super)</code>等来控制更细粒度的访问权限。</p>
<ul>
<li><code>pub(crate)</code>：对当前crate内可见。</li>
<li><code>pub(super)</code>：对父模块可见。</li>
</ul>
<h3 id="6-模块化的最佳实践"><a href="#6-模块化的最佳实践" class="headerlink" title="6. 模块化的最佳实践"></a>6. <strong>模块化的最佳实践</strong></h3><ul>
<li><strong>合理划分模块</strong>：根据功能和结构将代码划分成合理的模块，避免单个模块过大。</li>
<li><strong>模块文件组织</strong>：对于较大的模块，使用子模块和目录结构来进行组织。</li>
<li><strong>文档和可见性</strong>：通过合适的可见性控制来决定哪些函数或结构体对外部可见，哪些应该保持私有。</li>
</ul>
<h2 id="补充（路径访问）"><a href="#补充（路径访问）" class="headerlink" title="补充（路径访问）"></a>补充（路径访问）</h2><h3 id="1-crate"><a href="#1-crate" class="headerlink" title="1. crate"></a>1. <strong><code>crate</code></strong></h3><p><code>crate</code>指代当前的包或库。它用于在当前包或库中引用其他模块。它通常用于从根模块访问模块，无论当前模块的位置在哪里。</p>
<h4 id="用法："><a href="#用法：" class="headerlink" title="用法："></a>用法：</h4><ul>
<li><code>crate</code>用于访问当前包的根模块或其它模块。</li>
<li>它的作用是从整个包的根开始查找模块，而不管当前代码所在的位置。</li>
</ul>
<h4 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h4><p>假设你的项目结构如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">    main.rs</span><br><span class="line">    lib.rs</span><br><span class="line">    my_module.rs</span><br></pre></td></tr></table></figure>

<p>在<code>lib.rs</code>中定义了<code>my_module</code>模块，在<code>main.rs</code>中想要访问它，可以使用<code>crate</code>：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib.rs</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">mod</span> my_module;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.rs</span></span><br><span class="line"><span class="keyword">use</span> crate::my_module;  <span class="comment">// 通过 crate 访问根模块中的 my_module</span></span><br></pre></td></tr></table></figure>

<p>在这里，<code>crate::my_module</code>表示从当前包的根模块开始查找<code>my_module</code>。</p>
<h3 id="2-super"><a href="#2-super" class="headerlink" title="2. super"></a>2. <strong><code>super</code></strong></h3><p><code>super</code>表示父模块。它可以用来访问当前模块的父模块中的项。<code>super</code>使你能够从当前模块访问到上一层（父模块）的内容。</p>
<h4 id="用法：-1"><a href="#用法：-1" class="headerlink" title="用法："></a>用法：</h4><ul>
<li><code>super</code>用于引用当前模块的父模块，通常用于多层模块结构中，当你需要在子模块中引用父模块的内容时使用。</li>
</ul>
<h4 id="示例：-1"><a href="#示例：-1" class="headerlink" title="示例："></a>示例：</h4><p>假设你的项目结构如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">    main.rs</span><br><span class="line">    outer.rs</span><br></pre></td></tr></table></figure>

<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// outer.rs</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">mod</span> inner;</span><br><span class="line"></span><br><span class="line"><span class="comment">// inner.rs</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">function_in_inner</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Hello from inner module!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// outer.rs</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">function_in_outer</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Hello from outer module!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.rs</span></span><br><span class="line"><span class="keyword">mod</span> outer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="comment">// 访问 outer 模块的函数</span></span><br><span class="line">    outer::<span class="title function_ invoke__">function_in_outer</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过 super 访问 outer 模块中的函数</span></span><br><span class="line">    super::outer::<span class="title function_ invoke__">function_in_outer</span>();  <span class="comment">// super 可以用于访问父模块</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，<code>super::outer</code>表示访问<code>outer</code>模块的内容。</p>
<h3 id="3-self"><a href="#3-self" class="headerlink" title="3. self"></a>3. <strong><code>self</code></strong></h3><p><code>self</code>用于引用当前模块，它代表当前模块本身。<code>self</code>主要用于在模块内部引用当前模块的项。</p>
<h4 id="用法：-2"><a href="#用法：-2" class="headerlink" title="用法："></a>用法：</h4><ul>
<li><code>self</code>用于访问当前模块的成员，通常用于引用当前模块内定义的函数、结构体、常量等。</li>
</ul>
<h4 id="示例：-2"><a href="#示例：-2" class="headerlink" title="示例："></a>示例：</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mod</span> my_module &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">function_in_my_module</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;This is a function inside my_module!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">call_function</span>() &#123;</span><br><span class="line">        <span class="comment">// 使用 self 来调用当前模块中的函数</span></span><br><span class="line">        self::<span class="title function_ invoke__">function_in_my_module</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    my_module::<span class="title function_ invoke__">call_function</span>();  <span class="comment">// 调用 my_module 内部的函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，<code>self::function_in_my_module</code>表示访问<code>my_module</code>模块中的<code>function_in_my_module</code>函数。</p>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h3><ul>
<li>**<code>crate</code>**：表示当前包或库的根，常用于从根开始查找模块。</li>
<li>**<code>super</code>**：表示父模块，通常用于访问当前模块的上一层（父模块）中的内容。</li>
<li>**<code>self</code>**：表示当前模块，用于引用当前模块中的项。</li>
</ul>
<hr>
<h2 id="补充（路径访问）-1"><a href="#补充（路径访问）-1" class="headerlink" title="补充（路径访问）"></a>补充（路径访问）</h2><p>在Rust中，<code>package</code>（包）是指一个Rust项目的最外层单位，它包含了一个或多个库（<code>crate</code>）。包是一个代码库的集合，通常对应一个目录，包含了源代码、配置文件等。Rust中的包有时被称作”crate”，但“包”和“crate”有一些区别。</p>
<h3 id="1-包（Package）"><a href="#1-包（Package）" class="headerlink" title="1. 包（Package）"></a>1. <strong>包（Package）</strong></h3><p>包是Rust项目的整体，包含一个或多个<code>crate</code>，并且是一个发布和分发的基本单元。</p>
<h4 id="1-1-包的结构"><a href="#1-1-包的结构" class="headerlink" title="1.1 包的结构"></a>1.1 <strong>包的结构</strong></h4><p>一个Rust包至少需要包含一个<code>Cargo.toml</code>文件（用来管理项目的依赖、配置等）和一个<code>src</code>目录，其中<code>src</code>目录下包含Rust源代码文件。包通常有两种类型：</p>
<ul>
<li><strong>库包（Library Package）</strong>：这个包生成一个库，可以被其他Rust项目引用。</li>
<li><strong>二进制包（Binary Package）</strong>：这个包生成一个可执行的二进制文件。一个包可以包含多个二进制文件，但只允许有一个<code>main.rs</code>文件。</li>
</ul>
<h4 id="1-2-创建包"><a href="#1-2-创建包" class="headerlink" title="1.2 创建包"></a>1.2 <strong>创建包</strong></h4><p>使用<code>cargo new</code>命令可以创建一个新的包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cargo new my_project --bin  <span class="comment"># 创建一个二进制包</span></span><br><span class="line">cargo new my_library --lib  <span class="comment"># 创建一个库包</span></span><br></pre></td></tr></table></figure>

<p>这将自动为你生成包含<code>Cargo.toml</code>和<code>src/main.rs</code>或<code>src/lib.rs</code>的基本文件结构。</p>
<h4 id="1-3-包的Cargo-toml文件"><a href="#1-3-包的Cargo-toml文件" class="headerlink" title="1.3 包的Cargo.toml文件"></a>1.3 <strong>包的<code>Cargo.toml</code>文件</strong></h4><p>包的<code>Cargo.toml</code>文件包含了项目的元数据，例如依赖、版本、包名等。它是Rust项目的配置文件，类似于<code>package.json</code>在JavaScript中的作用。</p>
<p>例如，<code>Cargo.toml</code>文件的内容可能如下：</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[package]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;my_project&quot;</span></span><br><span class="line"><span class="attr">version</span> = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line"><span class="attr">edition</span> = <span class="string">&quot;2018&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="attr">regex</span> = <span class="string">&quot;1&quot;</span></span><br></pre></td></tr></table></figure>

<p>在上面的示例中，<code>[package]</code>部分定义了包的元数据（名称、版本等），而<code>[dependencies]</code>部分列出了该包的依赖项。</p>
<h3 id="2-crate"><a href="#2-crate" class="headerlink" title="2. crate"></a>2. <strong><code>crate</code></strong></h3><p><code>crate</code>是Rust中代码的最小单元，可以是一个库或一个二进制可执行文件。每个包至少有一个<code>crate</code>，并且可以通过<code>mod</code>关键字将代码划分成多个模块。Rust中的<code>crate</code>是源代码的组织方式，可以被其他项目作为依赖引用。</p>
<h4 id="2-1-库和二进制Crate"><a href="#2-1-库和二进制Crate" class="headerlink" title="2.1 库和二进制Crate"></a>2.1 <strong>库和二进制Crate</strong></h4><ul>
<li><strong>库Crate</strong>：没有<code>main()</code>函数，提供函数和结构体等功能给其他项目使用。</li>
<li><strong>二进制Crate</strong>：具有一个<code>main()</code>函数，构建为可执行文件。</li>
</ul>
<h3 id="3-包和crate的关系"><a href="#3-包和crate的关系" class="headerlink" title="3. 包和crate的关系"></a>3. <strong>包和<code>crate</code>的关系</strong></h3><ul>
<li>一个包可以包含多个<code>crate</code>，但一个<code>crate</code>属于一个包。</li>
<li>每个包至少有一个<code>crate</code>，可以是库<code>crate</code>或二进制<code>crate</code>。</li>
<li>包的目标是提供一个更大的项目结构，其中包含多个<code>crate</code>，这些<code>crate</code>可以通过模块化组织和管理。</li>
</ul>
<h4 id="3-1-包与crate的不同"><a href="#3-1-包与crate的不同" class="headerlink" title="3.1 包与crate的不同"></a>3.1 <strong>包与<code>crate</code>的不同</strong></h4><ul>
<li><strong>包</strong>：是Rust项目的整体，包含一个或多个<code>crate</code>，它是Rust的发布单位。</li>
<li>**<code>crate</code>**：是Rust的构建单元，可以是一个库或一个二进制文件。每个Rust项目中的每个文件夹对应着一个<code>crate</code>。</li>
</ul>
<h3 id="4-cargo与包的管理"><a href="#4-cargo与包的管理" class="headerlink" title="4. cargo与包的管理"></a>4. <strong><code>cargo</code>与包的管理</strong></h3><p>Rust使用<code>cargo</code>工具来管理包、构建、测试等工作。<code>cargo</code>会根据<code>Cargo.toml</code>文件来理解包的配置和依赖。</p>
<h4 id="常用的cargo命令："><a href="#常用的cargo命令：" class="headerlink" title="常用的cargo命令："></a>常用的<code>cargo</code>命令：</h4><ul>
<li><code>cargo new my_project</code>: 创建一个新的Rust项目（包）。</li>
<li><code>cargo build</code>: 构建当前包。</li>
<li><code>cargo run</code>: 运行当前包的二进制文件。</li>
<li><code>cargo test</code>: 运行当前包中的测试。</li>
<li><code>cargo doc</code>: 为当前包生成文档。</li>
<li><code>cargo publish</code>: 将包发布到<a target="_blank" rel="noopener" href="https://crates.io/">crates.io</a>（Rust的公共库注册中心）。</li>
</ul>
<h3 id="总结：-1"><a href="#总结：-1" class="headerlink" title="总结："></a>总结：</h3><ul>
<li><strong>包（Package）</strong>：是Rust项目的整体，包含一个或多个<code>crate</code>，用于代码组织、依赖管理、发布和分发。</li>
<li>**<code>crate</code>**：Rust中最小的编译单元，可以是库或二进制文件。每个包至少包含一个<code>crate</code>。</li>
<li>**<code>Cargo.toml</code>**：是包的配置文件，管理项目的依赖、版本等信息。</li>
</ul>
</article><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/12/27/rust_enum/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=7b04ae48-0772-20e8-aa63-5d0af1254dc4" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Rust 枚举和模式匹配</div></div></a></div><div class="next-post pull-right"><a href="/2024/12/28/rust_err_return/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=9cb39516-5194-ac69-afe5-d2c5cd0867a1" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Rust 返回值和错误处理</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2024/12/24/rust_class/" title="Rust 类型总结"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=6a6df365-6134-7067-dcbc-fe4790284939" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-12-24</div><div class="title">Rust 类型总结</div></div></a></div><div><a href="/2024/12/27/rust_enum/" title="Rust 枚举和模式匹配"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=7b04ae48-0772-20e8-aa63-5d0af1254dc4" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-12-27</div><div class="title">Rust 枚举和模式匹配</div></div></a></div><div><a href="/2024/12/28/rust_err_return/" title="Rust 返回值和错误处理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=9cb39516-5194-ac69-afe5-d2c5cd0867a1" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-12-28</div><div class="title">Rust 返回值和错误处理</div></div></a></div><div><a href="/2025/01/04/rust_generic/" title="Rust 泛型"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=ad8ea086-eec9-eede-d5dd-a4ea60f18528" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-01-04</div><div class="title">Rust 泛型</div></div></a></div><div><a href="/2024/12/24/rust_owner/" title="Rust 所有权"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=87fd9bd7-9c48-44a9-9edf-18e9d57e5706" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-12-24</div><div class="title">Rust 所有权</div></div></a></div><div><a href="/2024/12/26/rust_struct/" title="Rust 结构体"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=46515de6-967c-ce2b-1f90-fcb2af4a92d4" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-12-26</div><div class="title">Rust 结构体</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUz8I.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description">Documenting my transition into Web3 technologies, focusing on Rust, Solidity, and blockchain development.</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Seafarer</h1><div class="author-info__desc">Exploring the Future of Web3 and Coding</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/seafarer" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B7%A5%E7%A8%8B%E5%8C%96%E6%A8%A1%E5%9D%97"><span class="toc-number">1.</span> <span class="toc-text">工程化模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A8%A1%E5%9D%97-Modules"><span class="toc-number">1.0.1.</span> <span class="toc-text">1. 模块 (Modules)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97"><span class="toc-number">1.0.1.1.</span> <span class="toc-text">1.1 定义模块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E8%AE%BF%E9%97%AE%E6%A8%A1%E5%9D%97%E4%B8%AD%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-number">1.0.1.2.</span> <span class="toc-text">1.2 访问模块中的内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E6%A8%A1%E5%9D%97%E7%9A%84%E5%B1%82%E7%BA%A7%E7%BB%93%E6%9E%84"><span class="toc-number">1.0.1.3.</span> <span class="toc-text">1.3 模块的层级结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.0.2.</span> <span class="toc-text">2. 文件和目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%85%AC%E5%85%B1%E4%B8%8E%E7%A7%81%E6%9C%89"><span class="toc-number">1.0.3.</span> <span class="toc-text">3. 公共与私有</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8%E5%A4%96%E9%83%A8%E5%BA%93-Crates"><span class="toc-number">1.0.4.</span> <span class="toc-text">4. 使用外部库 (Crates)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E5%BC%95%E5%85%A5%E5%A4%96%E9%83%A8%E5%BA%93"><span class="toc-number">1.0.4.1.</span> <span class="toc-text">4.1 引入外部库</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%8F%AF%E8%A7%81%E6%80%A7%E6%8E%A7%E5%88%B6-Visibility"><span class="toc-number">1.0.5.</span> <span class="toc-text">5. 可见性控制 (Visibility)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.0.6.</span> <span class="toc-text">6. 模块化的最佳实践</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%EF%BC%88%E8%B7%AF%E5%BE%84%E8%AE%BF%E9%97%AE%EF%BC%89"><span class="toc-number">1.1.</span> <span class="toc-text">补充（路径访问）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-crate"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. crate</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%B3%95%EF%BC%9A"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">用法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">示例：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-super"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. super</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%B3%95%EF%BC%9A-1"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">用法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A-1"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">示例：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-self"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. self</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%B3%95%EF%BC%9A-2"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">用法：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A-2"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">示例：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="toc-number">1.1.4.</span> <span class="toc-text">总结：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%EF%BC%88%E8%B7%AF%E5%BE%84%E8%AE%BF%E9%97%AE%EF%BC%89-1"><span class="toc-number">1.2.</span> <span class="toc-text">补充（路径访问）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8C%85%EF%BC%88Package%EF%BC%89"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 包（Package）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E5%8C%85%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">1.1 包的结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E5%88%9B%E5%BB%BA%E5%8C%85"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">1.2 创建包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E5%8C%85%E7%9A%84Cargo-toml%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">1.3 包的Cargo.toml文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-crate"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. crate</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%BA%93%E5%92%8C%E4%BA%8C%E8%BF%9B%E5%88%B6Crate"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">2.1 库和二进制Crate</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8C%85%E5%92%8Ccrate%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 包和crate的关系</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E5%8C%85%E4%B8%8Ecrate%E7%9A%84%E4%B8%8D%E5%90%8C"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">3.1 包与crate的不同</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-cargo%E4%B8%8E%E5%8C%85%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. cargo与包的管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84cargo%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">常用的cargo命令：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A-1"><span class="toc-number">1.2.5.</span> <span class="toc-text">总结：</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/01/04/rust_generic/" title="Rust 泛型"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=ad8ea086-eec9-eede-d5dd-a4ea60f18528" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust 泛型"/></a><div class="content"><a class="title" href="/2025/01/04/rust_generic/" title="Rust 泛型">Rust 泛型</a><time datetime="2025-01-04T06:00:00.000Z" title="发表于 2025-01-04 14:00:00">2025-01-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/28/rust_err_return/" title="Rust 返回值和错误处理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=9cb39516-5194-ac69-afe5-d2c5cd0867a1" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust 返回值和错误处理"/></a><div class="content"><a class="title" href="/2024/12/28/rust_err_return/" title="Rust 返回值和错误处理">Rust 返回值和错误处理</a><time datetime="2024-12-28T14:19:00.000Z" title="发表于 2024-12-28 22:19:00">2024-12-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/28/rust_mokuai/" title="Rust 模块化"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=dd3cdcba-d6ad-fee4-9778-e97902633eb1" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust 模块化"/></a><div class="content"><a class="title" href="/2024/12/28/rust_mokuai/" title="Rust 模块化">Rust 模块化</a><time datetime="2024-12-28T14:19:00.000Z" title="发表于 2024-12-28 22:19:00">2024-12-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/27/rust_enum/" title="Rust 枚举和模式匹配"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=7b04ae48-0772-20e8-aa63-5d0af1254dc4" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust 枚举和模式匹配"/></a><div class="content"><a class="title" href="/2024/12/27/rust_enum/" title="Rust 枚举和模式匹配">Rust 枚举和模式匹配</a><time datetime="2024-12-27T09:44:00.000Z" title="发表于 2024-12-27 17:44:00">2024-12-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/26/rust_struct/" title="Rust 结构体"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://ooo.0x0.ooo/2024/12/23/OEUxH1.jpg?_r_=46515de6-967c-ce2b-1f90-fcb2af4a92d4" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Rust 结构体"/></a><div class="content"><a class="title" href="/2024/12/26/rust_struct/" title="Rust 结构体">Rust 结构体</a><time datetime="2024-12-26T08:24:00.000Z" title="发表于 2024-12-26 16:24:00">2024-12-26</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="Seafarer" target="_blank">Seafarer</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">9</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">1</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/" style="font-size: 0.88rem;">后端开发<sup>9</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Seafarer 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>